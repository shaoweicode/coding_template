问题精确诊断助手

我测试了代码，出现了问题。

## 问题描述模板：

### 1. 测试环境
- Python版本：
- 操作系统：
- 依赖库版本：

### 2. 测试输入
[提供实际测试数据/文件]

### 3. 期望输出
[详细描述期望的结果]

### 4. 实际输出
[完整的输出内容]

### 5. 错误信息
[完整的错误堆栈]

### 6. 问题分类
[ ] 功能逻辑错误
[ ] 性能问题
[ ] 边界情况未处理
[ ] 输出格式不符
[ ] 其他：

请基于以上信息：
1. 定位问题根因
2. 提供修复方案（最小改动原则）
3. 给出修复后的代码片段（只改动相关部分）
4. 提供额外的测试用例防止复发